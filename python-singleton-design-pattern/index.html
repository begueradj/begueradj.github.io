<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>Python singleton design pattern - Begueradj</title>
  <meta name="description" content="This article describes the main strategies to implement the Singleton design pattern in Python. I am going to skip the whole very subjective &ldquo;use and do not use singleton&rdquo; conundrum.
 Introduction Definition Implementation  Module Traditional Decoractor Metaclass Borg  Conclusion  
Introduction There are developers who simply call to &ldquo;ban&rdquo; this design pattern. Personally, I think while it does not respect the single responsibility principle, the singleton may still be useful in situations where you need to control a concurrent access to a shared resource, or want to use it to implement other design patterns.">
  <meta name="author" content="Billal Begueradj"/><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "Begueradj",
    
    "url": "https:\/\/www.begueradj.com\/"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "https:\/\/www.begueradj.com\/"
  
  
  
  
}
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "https:\/\/www.begueradj.com\/",
          "name": "home"
        }
    },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "https:\/\/www.begueradj.com\/python-singleton-design-pattern\/",
          "name": "Python singleton design pattern"
        }
    }]
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "author": {
    "name" : "Billal Begueradj"
  },
  "headline": "Python singleton design pattern",
  "description" : "This article describes the main strategies to implement the Singleton design pattern in Python. I am going to skip the whole very subjective \x26ldquo;use and do not use singleton\x26rdquo; conundrum.\n Introduction Definition Implementation  Module Traditional Decoractor Metaclass Borg  Conclusion  \nIntroduction There are developers who simply call to \x26ldquo;ban\x26rdquo; this design pattern. Personally, I think while it does not respect the single responsibility principle, the singleton may still be useful in situations where you need to control a concurrent access to a shared resource, or want to use it to implement other design patterns.",
  "inLanguage" : "en",
  "wordCount":  846 ,
  "datePublished" : "2017-04-08T12:33:21",
  "dateModified" : "2017-04-08T12:33:21",
  "image" : "https:\/\/www.begueradj.com\/begueradj.png",
  "keywords" : [ "" ],
  "mainEntityOfPage" : "https:\/\/www.begueradj.com\/python-singleton-design-pattern\/",
  "publisher" : {
    "@type": "Organization",
    "name" : "https:\/\/www.begueradj.com\/",
    "logo" : {
        "@type" : "ImageObject",
        "url" : "https:\/\/www.begueradj.com\/begueradj.png",
        "height" :  60 ,
        "width" :  60
    }
  }
}
</script>

<meta property="og:title" content="Python singleton design pattern" />
<meta property="og:description" content="This article describes the main strategies to implement the Singleton design pattern in Python. I am going to skip the whole very subjective &ldquo;use and do not use singleton&rdquo; conundrum.
 Introduction Definition Implementation  Module Traditional Decoractor Metaclass Borg  Conclusion  
Introduction There are developers who simply call to &ldquo;ban&rdquo; this design pattern. Personally, I think while it does not respect the single responsibility principle, the singleton may still be useful in situations where you need to control a concurrent access to a shared resource, or want to use it to implement other design patterns.">
<meta property="og:image" content="https://www.begueradj.com/begueradj.png" />
<meta property="og:url" content="https://www.begueradj.com/python-singleton-design-pattern/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="Begueradj" />

  <meta name="twitter:title" content="Python singleton design pattern" />
  <meta name="twitter:description" content="This article describes the main strategies to implement the Singleton design pattern in Python. I am going to skip the whole very subjective &ldquo;use and do not use singleton&rdquo; conundrum. â€¦">
  <meta name="twitter:image" content="https://www.begueradj.com/begueradj.png" />
  <meta name="twitter:card" content="summary" />
  <link href='https://www.begueradj.com/begueradj.png' rel='icon' type='image/x-icon'/>
  <meta name="generator" content="Hugo 0.58.2" />
  <link rel="alternate" href="https://www.begueradj.com/index.xml" type="application/rss+xml" title="Begueradj"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><link rel="stylesheet" href="https://www.begueradj.com/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="https://www.begueradj.com/css/highlight.min.css" /><link rel="stylesheet" href="https://www.begueradj.com/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">



<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-91013731-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://www.begueradj.com/">Begueradj</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="About" href="/about/">About</a>
            </li>
          
        
          
            <li>
              <a title="Categories" href="/categories">Categories</a>
            </li>
          
        

        

        
      </ul>
    </div>

    
      <div class="avatar-container">
        <div class="avatar-img-border">
          <a title="Begueradj" href="https://www.begueradj.com/">
            <img class="avatar-img" src="https://www.begueradj.com/begueradj.png" alt="Begueradj" />
          </a>
        </div>
      </div>
    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              
                <h1>Python singleton design pattern</h1>
              
              
              
              
                <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on April 8, 2017
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;4&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;846&nbsp;words
  
  
    
      &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Billal Begueradj
    
  
  
</span>


              
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        

<p>This article describes the main strategies to implement the Singleton design pattern in Python. I am going to skip the whole very subjective &ldquo;use and do not use singleton&rdquo; conundrum.</p>

<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#definition">Definition</a></li>
<li><a href="#implementation">Implementation</a>

<ul>
<li><a href="#module">Module</a></li>
<li><a href="#traditional">Traditional</a></li>
<li><a href="#decorator">Decoractor</a></li>
<li><a href="#metaclass">Metaclass</a></li>
<li><a href="#borg">Borg</a></li>
</ul></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>

<p><a name="introduction"></a></p>

<h3 id="introduction">Introduction</h3>

<p>There are developers who simply call to <em>&ldquo;ban&rdquo;</em> this design pattern. Personally, I think while it does not respect the single responsibility principle, the singleton may still be useful in situations where you need to control a concurrent access to a shared resource, or want to use it to implement other design patterns.
<a name="definition"></a></p>

<h3 id="definition">Definition</h3>

<p>On page 144 of the Gof4 book, the singleton design pattern&rsquo;s stated intent is to <em>&ldquo;ensure a class only has one instance&rdquo;</em>.
<a name="Implementation"></a></p>

<h3 id="implementation">Implementation</h3>

<p>The singleton design pattern must be implemented in such a way that the sole class instance must be reachable via a global access point -namely a function, and can be extensible by the means of inheritence. Below are listed some methodologies Python uses to concrete it.
<a name="module"></a></p>

<h6 id="module">Module</h6>

<p>The easiest approach to fulfill the singteton design pattern goal is to keep the global state in private variables within module which, in turn, must provide a way to access them by means of public functions.</p>

<p>As an example, here is <code>singleton.py</code> file:</p>

<pre><code class="language-python">_firstname = 'Begueradj' #private state

def get_firstname(): #access point
   return _firstname

</code></pre>

<p>The main application makes use of it as follows:</p>

<pre><code class="language-python">import singleton


class UseSingletonModule:

   def __init__(self):
       self.firstname  = singleton.get_firstname()
       self.lastname = 'Amazigh'
       
   def print_fullname(self):
       print('Full name: {} {}'.format(self.firstname, self.lastname))


if __name__ == '__main__':
   singleton_instance = UseSingletonModule()
   singleton_instance.print_fullname()
</code></pre>

<p>This is a practical approach but the main trivial issue with it is that there is no way to re-use the code through inheritance. This means the module approach does not fully respect the singleton design pattern. One can also argue this may sound a &ldquo;coward&rdquo; implementation in that may be most of other high level programming languages could do the same. This can also anger purists in that it is neither  pythonic nor does it take advantage of the object-oriented concepts.
<a name="traditional"></a></p>

<h6 id="traditional">Traditional</h6>

<p>To remedy to the drawbacks of the previous approach, there is a traditional way to implement the singleton design pattern in Python:</p>

<pre><code class="language-python">class TraditionalSingleton(object): 

   def __new__(cls): 
       if not hasattr(cls, 'instance'): 
           cls.instance = super(Singleton, cls).__new__(cls) 
       return cls.instance
   
   def __init__(self):
       self.data_test = 'begueradj'       
</code></pre>

<p>Here an advantage is taken from the special static method <code>__new__()</code> which helps to control instance creation. Unlike <code>__init__()</code>, it always takes as a parameter the class <code>cls</code> in which it is invoked and returns an instance of it.</p>

<p>The Python built-in function <code>hasattr()</code> checks if the class <code>cls</code> has an attribute called <em>&lsquo;instance&rsquo;</em>. If that is not the case, the <em>&lsquo;instance&rsquo;</em> attribute is created and returned.</p>

<p>A better explanation of this implementation can be through the use of <code>TraditionalSingleton()</code> class:</p>

<pre><code class="language-python">&gt;&gt;&gt; first_instance= TraditionalSingleton() 
&gt;&gt;&gt; second_instance = TraditionalSingleton() 
</code></pre>

<p>Two instances of <code>TraditionalSingleton()</code> class are created. In reality, they are the same instance:</p>

<pre><code class="language-python">&gt;&gt;&gt; first_instance is second_instance True 
</code></pre>

<p>Hence modifying <code>data_test</code> variable in any instance will be automatically mirrored in the other instance:</p>

<pre><code class="language-python">&gt;&gt;&gt; first_instance.data_test = 'begueradj.com'
&gt;&gt;&gt; second_instance.data_test
'begueradj.com'
</code></pre>

<p>The main issue of this approach remains its inconvenience to use inheritance.
<a name="decorator"></a></p>

<h6 id="decoractor">Decoractor</h6>

<p>There are many ways to implement the singleton using a decorator. Here is one of the implementations I found on StackOverflow:</p>

<pre><code class="language-python">class Singleton:

   def __init__(self, cls):
        self._cls = cls

    def get_instance(self):        
        try:
            return self._instance
        except AttributeError:
            self._instance = self._cls()
            return self._instance

    def __call__(self):
        raise TypeError('Use Singleton.get_instance().')

    def __instancecheck__(self, inst):
        return isinstance(inst, self._cls)
</code></pre>

<p>Here is how to force a class to be a singleton:</p>

<pre><code class="language-python">@Singleton
class SingletonClass:
   # do whatever needed
</code></pre>

<p>This is how to instantiate <code>SingletonClass()</code> class:</p>

<pre><code class="language-python">singleton_class_instance = SingletonClass.get_instance()
</code></pre>

<p>The main drawback with this implementation is that it is not thread-safe.
<a name="metaclass"></a></p>

<h6 id="metaclass">Metaclass</h6>

<p>An object is an instance of a class which is itself an instance of a metaclass:</p>

<pre><code class="language-python">class Singleton(type):
    _instances = {}
    def __call__(cls):
        if cls not in cls._instances:
            cls._instances[cls] = super(Singleton, cls).__call__()
        return cls._instances[cls]
</code></pre>

<p>A class can be declared singleton like follows:</p>

<pre><code class="language-python">class SingletonClass(metaclass=Singleton):
    # do whatever needed
</code></pre>

<p>While this approach copes well with inheritance, I still personally prefer the decorator approach which is handy.
<a name="borg"></a></p>

<h6 id="borg">Borg</h6>

<p>The Borg approach states that the identity of the instantiated objects is not important. Borg focus on the state which must be common and shared. This allows the creation of as many instances as needed, but any of these instances which modifies the state mirrors the modification to all the remaining instances. This is why Borg is also referred as <strong>monostate</strong> design pattern:</p>

<pre><code class="language-python">class Borg:
   _shared_state = {}
   
   def __init__(self):
       self.__dict__ = self._shared_state
</code></pre>

<p>Any class which inherits from the above one becomes a Borg class itself:</p>

<pre><code class="language-python">class SingletonExample(Borg):

   def __init__(self, name=None):
       Borg.__init__(self)
   # Do whatever needed

</code></pre>

<p>Alex Martelli, the author of Borg, considers this as a design pattern of its own. While some others consider it just a special singleton implementation. I personally belong to this later group.
<a name="conclusion"></a></p>

<h3 id="conclusion">Conclusion</h3>

<p>I have gone briefly gone through the  main approaches Python uses to implement it. You can also design your own implementation. It is up to you the developer to decide which one is more suitable to your case.</p>


        

        
            <hr/>
            <section id="social-share">
              <div class="list-inline footer-links">
                

<div class="share-box" aria-hidden="true">
    <ul class="share">
      
      <li>
        <a href="//twitter.com/share?url=https%3a%2f%2fwww.begueradj.com%2fpython-singleton-design-pattern%2f&amp;text=Python%20singleton%20design%20pattern&amp;via=" target="_blank" title="Share on Twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.begueradj.com%2fpython-singleton-design-pattern%2f" target="_blank" title="Share on Facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//reddit.com/submit?url=https%3a%2f%2fwww.begueradj.com%2fpython-singleton-design-pattern%2f&amp;title=Python%20singleton%20design%20pattern" target="_blank" title="Share on Reddit">
          <i class="fab fa-reddit"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fwww.begueradj.com%2fpython-singleton-design-pattern%2f&amp;title=Python%20singleton%20design%20pattern" target="_blank" title="Share on LinkedIn">
          <i class="fab fa-linkedin"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.stumbleupon.com/submit?url=https%3a%2f%2fwww.begueradj.com%2fpython-singleton-design-pattern%2f&amp;title=Python%20singleton%20design%20pattern" target="_blank" title="Share on StumbleUpon">
          <i class="fab fa-stumbleupon"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fwww.begueradj.com%2fpython-singleton-design-pattern%2f&amp;description=Python%20singleton%20design%20pattern" target="_blank" title="Share on Pinterest">
          <i class="fab fa-pinterest"></i>
        </a>
      </li>
    </ul>
  </div>
  

              </div>
            </section>
        

        
          

          
        
      </article>

      
        <ul class="pager blog-pager">
          
            <li class="previous">
              <a href="https://www.begueradj.com/tkinter-the-saya-idiom/" data-toggle="tooltip" data-placement="top" title="tkinter: the SaYa idiom">&larr; Previous Post</a>
            </li>
          
          
            <li class="next">
              <a href="https://www.begueradj.com/xml-parsing-with-minidom/" data-toggle="tooltip" data-placement="top" title="XML parsing with minidom">Next Post &rarr;</a>
            </li>
          
        </ul>
      


      
        
        
      

    </div>
  </div>
</div>

      
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
                <a href="https://github.com/begueradj" title="GitHub">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://stackoverflow.com/users/8752798/begueradj" title="StackOverflow">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-stack-overflow fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              Billal Begueradj
            
          

          &nbsp;&bull;&nbsp;&copy;
          
            2020
          

          
            &nbsp;&bull;&nbsp;
            <a href="https://www.begueradj.com/">Begueradj</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="https://gohugo.io">Hugo v0.58.2</a> powered &nbsp;&bull;&nbsp; Theme <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a> adapted from <a href="https://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a>
          
        </p>
      </div>
    </div>
  </div>
</footer><script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js" integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js" integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script src="https://www.begueradj.com/js/main.js"></script>
<script src="https://www.begueradj.com/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> $(document).ready(function() {$("pre.chroma").css("padding","0");}); </script><script> renderMathInElement(document.body); </script><script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script><script src="https://www.begueradj.com/js/load-photoswipe.js"></script>










    
  </body>
</html>

