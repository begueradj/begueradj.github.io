<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>How to use Moment.js with AdonisJs - Begueradj</title>
  <meta name="description" content="Preamble I decided to write this article following a question published yesterday on the AdonisJs community forum solliciting if there is a tutorial that shows how to use Moment.js in AdonisJs. I answered to that question yesterday, but I would like to share the information with others here.
Do not try to install Moment.js because Adonis.js uses it internally. This means you can take any Moment.js instance and apply on it any Moment.">
  <meta name="author" content="Billal Begueradj"/><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "Begueradj",
    
    "url": "https:\/\/begueradj.github.io\/"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "https:\/\/begueradj.github.io\/"
  
  
  
  
}
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "https:\/\/begueradj.github.io\/",
          "name": "home"
        }
    },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "https:\/\/begueradj.github.io\/how-to-use-moment.js-with-adonisjs\/",
          "name": "How to use moment.js with adonis js"
        }
    }]
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "author": {
    "name" : "Billal Begueradj"
  },
  "headline": "How to use Moment.js with AdonisJs",
  "description" : "Preamble I decided to write this article following a question published yesterday on the AdonisJs community forum solliciting if there is a tutorial that shows how to use Moment.js in AdonisJs. I answered to that question yesterday, but I would like to share the information with others here.\nDo not try to install Moment.js because Adonis.js uses it internally. This means you can take any Moment.js instance and apply on it any Moment.",
  "inLanguage" : "en",
  "wordCount":  700 ,
  "datePublished" : "2019-04-19T12:33:21",
  "dateModified" : "2019-04-19T12:33:21",
  "image" : "https:\/\/begueradj.github.io\/begueradj.png",
  "keywords" : [ "" ],
  "mainEntityOfPage" : "https:\/\/begueradj.github.io\/how-to-use-moment.js-with-adonisjs\/",
  "publisher" : {
    "@type": "Organization",
    "name" : "https:\/\/begueradj.github.io\/",
    "logo" : {
        "@type" : "ImageObject",
        "url" : "https:\/\/begueradj.github.io\/begueradj.png",
        "height" :  60 ,
        "width" :  60
    }
  }
}
</script>

<meta property="og:title" content="How to use Moment.js with AdonisJs" />
<meta property="og:description" content="Preamble I decided to write this article following a question published yesterday on the AdonisJs community forum solliciting if there is a tutorial that shows how to use Moment.js in AdonisJs. I answered to that question yesterday, but I would like to share the information with others here.
Do not try to install Moment.js because Adonis.js uses it internally. This means you can take any Moment.js instance and apply on it any Moment.">
<meta property="og:image" content="https://begueradj.github.io/begueradj.png" />
<meta property="og:url" content="https://begueradj.github.io/how-to-use-moment.js-with-adonisjs/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="Begueradj" />

  <meta name="twitter:title" content="How to use Moment.js with AdonisJs" />
  <meta name="twitter:description" content="Preamble I decided to write this article following a question published yesterday on the AdonisJs community forum solliciting if there is a tutorial that shows how to use Moment.js in AdonisJs. I â€¦">
  <meta name="twitter:image" content="https://begueradj.github.io/begueradj.png" />
  <meta name="twitter:card" content="summary" />
  <link href='https://begueradj.github.io/begueradj.png' rel='icon' type='image/x-icon'/>
  <meta name="generator" content="Hugo 0.58.2" />
  <link rel="alternate" href="https://begueradj.github.io/index.xml" type="application/rss+xml" title="Begueradj"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><link rel="stylesheet" href="https://begueradj.github.io/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="https://begueradj.github.io/css/highlight.min.css" /><link rel="stylesheet" href="https://begueradj.github.io/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">



<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-91013731-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://begueradj.github.io/">Begueradj</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="About" href="/about/">About</a>
            </li>
          
        
          
            <li>
              <a title="Categories" href="/categories">Categories</a>
            </li>
          
        

        

        
      </ul>
    </div>

    
      <div class="avatar-container">
        <div class="avatar-img-border">
          <a title="Begueradj" href="https://begueradj.github.io/">
            <img class="avatar-img" src="https://begueradj.github.io/begueradj.png" alt="Begueradj" />
          </a>
        </div>
      </div>
    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              
                <h1>How to use Moment.js with AdonisJs</h1>
              
              
              
              
                <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on April 19, 2019
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;4&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;700&nbsp;words
  
  
    
      &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Billal Begueradj
    
  
  
</span>


              
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        

<h3 id="preamble">Preamble</h3>

<p>I decided to write this article following a <a href="https://forum.adonisjs.com/t/moment-js-in-adonis-framework/3398">question</a> published yesterday on the AdonisJs community forum solliciting if there is a tutorial that shows how to use Moment.js in AdonisJs. I answered to that question yesterday, but I would like to share the information with others here.</p>

<p>Do not try to install Moment.js because Adonis.js uses it internally. This means you can take any Moment.js instance and apply on it any Moment.js method you want.</p>

<h3 id="server-side">Server side</h3>

<p>We focus only on the server side article, and we will work on the same example the question provides: a <strong>Student</strong> entity. First we create an AdonisJs application in the form of an API (but what follows will also work if you prefer to use the MVC instance of AdonisJs):</p>

<pre><code class="language-cmd">adonis new server --api-only
</code></pre>

<p>Create a MySQL database (or choose an other RDBMS if you want):</p>

<pre><code class="language-cmd">create database test_momentjs
</code></pre>

<p>Then edit <strong>server/.env</strong> file with the appropriate MySQL credentials. Now we start to create a <code>students</code> migration file:</p>

<pre><code class="language-cmd">adonis make:migration students
</code></pre>

<p>Open the generated file located in <strong>server/database/migrations</strong> and write this:</p>

<pre><code class="language-javascript">'use strict'

/** @type {import('@adonisjs/lucid/src/Schema')} */
const Schema = use('Schema')

class StudentsSchema extends Schema {
  up () {
    this.create('students', (table) =&gt; {
      table.string('id', 30).primary()
      table.string('name', 30).notNullable()
      table.date('dob').notNullable()
    })
  }

  down () {
    this.drop('students')
  }
}

module.exports = StudentsSchema
</code></pre>

<p>The field in which we are interested here is the <code>dob</code>, acronym for <em>date of birth</em>. Next create the <code>Student</code> model:</p>

<pre><code class="language-cmd">adonis make:model Student
</code></pre>

<p>Go to <strong>server/app/Models/Student.js</strong> and copy paste this code:</p>

<pre><code class="language-javascript">'use strict'

/** @type {typeof import('@adonisjs/lucid/src/Lucid/Model')} */
const Model = use('Model')

class Student extends Model {

  static get createdAtColumn() {
    return null
  }

  static get updatedAtColumn() {
    return null
  }

  static get dates() {
    return super.dates.concat(['dob'])
  }
  
  static castDates(field, value) {
    if (field === 'dob') {
      return value.format('DD-MM-YYYY')
    }
  }

  getName(name) {
    return name.toLowerCase()
  }
}

module.exports = Student
</code></pre>

<p>Everything is played on around this model, so let us break it down:</p>

<ul>
<li>First, I let AdonisJs know that the corresponding migration file to this model is not implementing the default <code>created_at</code> and <code>updated_at</code> table columns.</li>

<li><p>We let AdonisJs know that <code>dob</code> is a date field by concatinating it to the <code>dates</code> object within the static <code>dates()</code> method:</p>

<pre><code class="language-javascript">static get dates() {
   return super.dates.concat(['dob'])
}
</code></pre></li>

<li><p>I ask AdonisJs to display me this date field in the format I am used to at French universities in the static <code>castDates()</code> method:</p>

<pre><code class="language-javascript">static castDates(field, value) {
   if (field === 'dob') {
      return value.format('DD-MM-YYYY')
   }
}
</code></pre></li>
</ul>

<p>Do not worry about the effect of <code>castDates()</code>: it has no effect on how the dates are actually stored in the database, all what it does is to format the dates in the shape you want to display it for the client.</p>

<p>Of course we need a controller to handle our HTTP requests and talk with the model we just created above:</p>

<pre><code class="language-cmd">adonis make:controller Student --type http
</code></pre>

<p>Open <strong>server/app/Controllers/Http/StudentController.js</strong> and copy paste this code:</p>

<pre><code class="language-javascript">'use strict'

const Student = use('App/Models/Student')

class StudentController {

  async store({ request, response }) {
    const data = request.post()
    const student = new Student()
    const keys = Object.keys(data)
    keys.forEach((key) =&gt; { student[key] = data[key] })
    await student.save()
    response.status(200)
  }

  async show({ response, params }) {
    try {
      const student = await Student.find(params.id)
      return student.toJSON()
    } catch(e) {
      console.log(e.message)
    }
  }
}

module.exports = StudentController
</code></pre>

<p>Basically we are interested only in saving instances of the Student entity and fetching one of them given his <code>id</code> for the client so that we can check if our <code>dob</code> is formatted the way we asked AdonisJs to handle it. You can either use <code>curl</code> to communicate with this server or use my demo repository I created yesterday for this purpose.</p>

<p>Of course, do not forget to show the HTTP requests where to go to be satisfied when they hit the server. For this, you need to open <strong>server/start/routes.js</strong> file and type this:</p>

<pre><code class="language-javascript">Route.resource('students', 'StudentController')
  .only(['store', 'show'])
</code></pre>

<p>This line <code>.only(['store', 'show'])</code> means the HTTP requests must be directed only to the <code>store()</code> and <code>show()</code> methods located in our controller above. Any other HTTP requests not intended to commincate with these methods will fail into the 404 HTTP code.</p>

<p>You can use my GitHub demo and play with the code at your will.</p>


        

        
            <hr/>
            <section id="social-share">
              <div class="list-inline footer-links">
                

<div class="share-box" aria-hidden="true">
    <ul class="share">
      
      <li>
        <a href="//twitter.com/share?url=https%3a%2f%2fbegueradj.github.io%2fhow-to-use-moment.js-with-adonisjs%2f&amp;text=How%20to%20use%20Moment.js%20with%20AdonisJs&amp;via=" target="_blank" title="Share on Twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fbegueradj.github.io%2fhow-to-use-moment.js-with-adonisjs%2f" target="_blank" title="Share on Facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//reddit.com/submit?url=https%3a%2f%2fbegueradj.github.io%2fhow-to-use-moment.js-with-adonisjs%2f&amp;title=How%20to%20use%20Moment.js%20with%20AdonisJs" target="_blank" title="Share on Reddit">
          <i class="fab fa-reddit"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fbegueradj.github.io%2fhow-to-use-moment.js-with-adonisjs%2f&amp;title=How%20to%20use%20Moment.js%20with%20AdonisJs" target="_blank" title="Share on LinkedIn">
          <i class="fab fa-linkedin"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.stumbleupon.com/submit?url=https%3a%2f%2fbegueradj.github.io%2fhow-to-use-moment.js-with-adonisjs%2f&amp;title=How%20to%20use%20Moment.js%20with%20AdonisJs" target="_blank" title="Share on StumbleUpon">
          <i class="fab fa-stumbleupon"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fbegueradj.github.io%2fhow-to-use-moment.js-with-adonisjs%2f&amp;description=How%20to%20use%20Moment.js%20with%20AdonisJs" target="_blank" title="Share on Pinterest">
          <i class="fab fa-pinterest"></i>
        </a>
      </li>
    </ul>
  </div>
  

              </div>
            </section>
        

        
          

          
        
      </article>

      
        <ul class="pager blog-pager">
          
            <li class="previous">
              <a href="https://begueradj.github.io/effective-file-streaming-using-adonisjs/" data-toggle="tooltip" data-placement="top" title="Effective file streaming using AdonisJs">&larr; Previous Post</a>
            </li>
          
          
            <li class="next">
              <a href="https://begueradj.github.io/testing-emit-event-in-vue.js-using-jest-and-vue-test-utils/" data-toggle="tooltip" data-placement="top" title="Testing emit event in Vue.js using Jest and Vue Test Utils">Next Post &rarr;</a>
            </li>
          
        </ul>
      


      
        
        
      

    </div>
  </div>
</div>

      
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
                <a href="https://github.com/begueradj" title="GitHub">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://stackoverflow.com/users/8752798/begueradj" title="StackOverflow">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-stack-overflow fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              Billal Begueradj
            
          

          &nbsp;&bull;&nbsp;&copy;
          
            2020
          

          
            &nbsp;&bull;&nbsp;
            <a href="https://begueradj.github.io/">Begueradj</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="https://gohugo.io">Hugo v0.58.2</a> powered &nbsp;&bull;&nbsp; Theme <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a> adapted from <a href="https://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a>
          
        </p>
      </div>
    </div>
  </div>
</footer><script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js" integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js" integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script src="https://begueradj.github.io/js/main.js"></script>
<script src="https://begueradj.github.io/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> $(document).ready(function() {$("pre.chroma").css("padding","0");}); </script><script> renderMathInElement(document.body); </script><script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script><script src="https://begueradj.github.io/js/load-photoswipe.js"></script>










    
  </body>
</html>

